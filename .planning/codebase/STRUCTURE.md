# Codebase Structure

**Analysis Date:** 2025-12-24

## Directory Layout

```
Invervall-Timer-GPT5.2/
├── lib/                    # Application source code
│   ├── models/            # Data models
│   ├── services/          # Service implementations
│   ├── state/             # State management (Provider stores)
│   ├── ui/                # Presentation layer
│   │   └── widgets/       # Reusable UI components
│   ├── l10n/              # Localization
│   └── main.dart          # App entry point
├── test/                   # Tests
├── android/                # Android native configuration
├── .dart_tool/            # Build artifacts (generated)
├── pubspec.yaml           # Flutter project configuration
├── pubspec.lock           # Dependency lockfile
├── analysis_options.yaml  # Dart analyzer configuration
└── README.md              # Project documentation
```

## Directory Purposes

**lib/**
- Purpose: Flutter application source code
- Contains: All Dart code for the app
- Entry point: `lib/main.dart`
- Subdirectories: models/, services/, state/, ui/, l10n/

**lib/models/**
- Purpose: Data models with serialization logic
- Contains: Immutable data classes
- Key files:
  - `timer_model.dart` - TimerModel, QuietHours classes
- Pattern: Immutable with `copyWith()`, manual JSON serialization

**lib/services/**
- Purpose: Service layer abstractions for external systems
- Contains: Storage and notification implementations
- Key files:
  - `timer_storage.dart` - SharedPreferences wrapper
  - `notification_service.dart` - Android notification scheduler
- Pattern: Dependency injection targets

**lib/state/**
- Purpose: State management layer
- Contains: ChangeNotifier stores
- Key files:
  - `timer_store.dart` - Central app state (timers, settings, business logic)
- Pattern: Provider pattern with ChangeNotifier

**lib/ui/**
- Purpose: Presentation layer (screens and widgets)
- Contains: UI components
- Key files:
  - `main_screen.dart` - Primary scaffold, timer list, settings
- Subdirectories: widgets/

**lib/ui/widgets/**
- Purpose: Reusable UI components
- Contains: Custom widgets
- Key files:
  - `timer_card.dart` - Individual timer display with countdown
  - `timer_editor_sheet.dart` - Modal bottom sheet for timer CRUD
- Pattern: Stateless/Stateful widgets

**lib/l10n/**
- Purpose: Internationalization (i18n)
- Contains: Translation strings and delegates
- Key files:
  - `app_localizations.dart` - EN/DE translations, LocalizationsDelegate
- Pattern: Manual translation dictionary (no codegen)

**test/**
- Purpose: Test files
- Contains: Widget tests
- Key files:
  - `widget_test.dart` - Single basic widget test
- Pattern: `*_test.dart` naming convention

**android/**
- Purpose: Android native configuration
- Contains: Gradle build files, AndroidManifest.xml, native resources
- Key locations:
  - `android/app/src/main/AndroidManifest.xml` - Permissions, app configuration
  - `android/gradle.properties` - JVM settings

**.dart_tool/**
- Purpose: Build artifacts and generated code
- Source: Auto-generated by Flutter/Dart tooling
- Committed: No (in .gitignore)

## Key File Locations

**Entry Points:**
- `lib/main.dart` - App initialization, Provider setup, theme configuration

**Configuration:**
- `pubspec.yaml` - Dependencies, assets, Flutter configuration
- `pubspec.lock` - Dependency version lockfile
- `analysis_options.yaml` - Linting rules (flutter_lints)
- `android/app/src/main/AndroidManifest.xml` - Android permissions

**Core Logic:**
- `lib/state/timer_store.dart` - Business logic, state management
- `lib/services/notification_service.dart` - Notification scheduling
- `lib/services/timer_storage.dart` - Persistence layer

**Models:**
- `lib/models/timer_model.dart` - Timer and QuietHours data structures

**UI:**
- `lib/ui/main_screen.dart` - Main app screen
- `lib/ui/widgets/timer_card.dart` - Timer display widget
- `lib/ui/widgets/timer_editor_sheet.dart` - Timer editor modal

**Testing:**
- `test/widget_test.dart` - Widget tests

**Documentation:**
- `README.md` - Project overview, features, structure

## Naming Conventions

**Files:**
- snake_case for all Dart files
- `*_model.dart` for data models
- `*_service.dart` for service implementations
- `*_store.dart` for state management
- `*_screen.dart` for full screens
- `*_card.dart`, `*_sheet.dart` for UI components
- `*_test.dart` for test files

**Directories:**
- snake_case for all directories
- Plural names for collections: models/, services/, widgets/
- Singular for specific purpose: state/, ui/, l10n/

**Classes:**
- PascalCase: TimerModel, TimerStore, TimerCard, MainScreen
- Suffixes indicate purpose: *Model, *Service, *Store, *Screen, *Card, *Sheet

**Special Patterns:**
- `main.dart` - Standard Flutter entry point
- Private members prefixed with `_`

## Where to Add New Code

**New Timer Feature:**
- Model changes: `lib/models/timer_model.dart`
- Business logic: `lib/state/timer_store.dart`
- UI updates: `lib/ui/widgets/timer_card.dart` or `timer_editor_sheet.dart`
- Tests: `test/widget_test.dart` or new test file

**New Service:**
- Implementation: `lib/services/new_service.dart`
- Integration: Inject into `TimerStore` constructor in `lib/main.dart`

**New Screen:**
- Implementation: `lib/ui/new_screen.dart`
- Navigation: Add routing in `lib/main.dart` or modal in `lib/ui/main_screen.dart`

**New Widget:**
- Reusable component: `lib/ui/widgets/new_widget.dart`
- Screen-specific: Inline in screen file

**Localization:**
- Add translations to `lib/l10n/app_localizations.dart` (_enStrings, _deStrings)

**Tests:**
- Widget tests: `test/new_widget_test.dart`
- Unit tests: `test/unit/new_test.dart` (create unit/ subdirectory)

## Special Directories

**.dart_tool/**
- Purpose: Build artifacts, package cache
- Source: Auto-generated by pub/Flutter
- Committed: No (gitignored)
- Used by: Dart/Flutter tooling

**android/**
- Purpose: Android platform-specific code and configuration
- Source: Generated by `flutter create`, manually modified
- Committed: Yes (platform configuration)
- Used by: Flutter build system for Android

---

*Structure analysis: 2025-12-24*
*Update when directory structure changes*
